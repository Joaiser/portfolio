---
import ExperienceCard from "./ExperienceCard.astro";
---

<section
  id="experience"
  class="relative bg-white dark:bg-gradient-to-b dark:from-gray-950 dark:via-purple-950 dark:to-gray-950 text-black dark:text-gray-100 px-4 py-20"
>
  <div class="container mx-auto max-w-5xl text-center relative">
    <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">
      Mi experiencia
    </h2>
    <p class="text-gray-700 mb-12 dark:text-white">
      He recorrido un camino de aprendizaje constante: desde los proyectos que
      hice en el colegio hasta m贸dulos avanzados para PrestaShop y aplicaciones
      web modernas con React, Next.js y Astro.
    </p>

    <!-- Timeline wrapper -->
    <div
      class="relative pl-8 border-l border-gray-300 dark:border-gray-700 text-left space-y-12"
    >
      <!-- Punto animado del timeline -->
      <div
        class="absolute -left-3 top-0 w-6 h-6 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-pulse"
      >
      </div>

      <div class="experience-card opacity-0 translate-y-8">
        <div class="experience-card opacity-0 translate-y-8">
          <ExperienceCard
            role="Desarrollador Web & E-commerce Manager"
            company="Salamandra Luz"
            period="2024 - Presente"
            description="Encargado del desarrollo y gesti贸n integral de la tienda online en PrestaShop: creaci贸n de m贸dulos personalizados, implementaci贸n de nuevas funcionalidades, optimizaci贸n de rendimiento y administraci贸n del servidor y la base de datos. Adem谩s, me ocupo de la gesti贸n diaria del e-commerce: promociones, precios, atenci贸n a clientes, pedidos y dise帽o de fichas de producto utilizando herramientas como Gimp e InDesign."
            tech={[
              "PrestaShop",
              "PHP",
              "ECMAScript",
              "JavaScript",
              "TPL",
              "CSS",
            ]}
          />
        </div>
      </div>

      <div class="experience-card opacity-0 translate-y-8">
        <div class="experience-card opacity-0 translate-y-8">
          <ExperienceCard
            role="Desarrollador Full Stack Autodidacta "
            company="Proyectos Personales"
            period="2023 - Presente"
            description="Mi forma de avanzar siempre ha sido construyendo. Desde p谩ginas est谩ticas hasta e-commerces y aplicaciones completas con backend, APIs y despliegues en producci贸n. He roto, arreglado y optimizado c贸digo hasta entender c贸mo funcionan las cosas por dentro. Hoy desarrollo proyectos completos con React, Next.js, Astro o PrestaShop 8, conectados a bases de datos, APIs y listos para producci贸n. Me centro en estructurar bien el c贸digo, optimizar procesos y mejorar cada detalle, sin dejar de aprender algo nuevo en cada paso."
            tech={[
              "React",
              "Next.js",
              "Astro",
              "Node.js",
              "Express",
              "PrestaShop 8",
              "MongoDB",
              "MySQL",
              "Vercel",
              "JS",
              "CSS",
              "PHP",
              "HTML",
            ]}
          />
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  if (typeof window !== "undefined") {
    gsap.registerPlugin(ScrollTrigger);

    gsap.utils.toArray(".experience-card").forEach((card) => {
      gsap.to(card as HTMLElement, {
        opacity: 1,
        y: 0,
        duration: 0.8,
        ease: "power2.out",
        scrollTrigger: {
          trigger: card as HTMLElement,
          start: "top 85%",
        },
      });
    });
  }
</script>
