---
const skills = [
  {
    icon: "游꿛",
    title: "Frontend",
    description: `Me gusta crear interfaces <strong>visuales, din치micas y agradables</strong> que respondan con fluidez y estilo.`,
    label: "Tecnolog칤as favoritas:",
    items: ["React", "Astro", "CSS", "Tailwind"],
  },
  {
    icon: "游",
    title: "Backend",
    description: `Disfruto montar l칩gica, flujos y APIs que <strong>funcionen bien y no se rompan</strong>. Me gusta cuando todo encaja.`,
    label: "Stack habitual:",
    items: ["Next.js", "Node.js", "Express", "PHP"],
  },
  {
    icon: "游",
    title: "eCommerce & Marketing",
    description: `Trabajo cada d칤a con tiendas online. <strong>Gesti칩n de productos, campa침as, precios y clientes</strong>. Todo afinado.`,
    label: "Herramientas y APIs:",
    items: [
      "PrestaShop",
      "Strapi",
      "Meta & Google APIs",
      "Automatizaci칩n campa침as",
    ],
  },
];
---

<section
  id="skills"
  class="bg-white pt-32 px-4 relative dark:bg-gradient-to-b dark:from-purple-950 dark:via-purple-800 dark:to-purple-950"
>
  <div class="container mx-auto relative -mt-[18rem]">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      {
        skills.map((block) => (
          <div class="bg-gray-100 p-8 rounded-2xl shadow-md hover:shadow-lg flex flex-col items-center text-center dark:bg-gradient-to-b dark:from-gray-950 dark:to-purple-950">
            <div class="text-6xl mb-6">{block.icon}</div>
            <h3 class="text-2xl lg:text-3xl font-bold text-gray-800 mb-4 dark:text-white">
              {block.title}
            </h3>
            <p
              class="text-base lg:text-lg text-gray-700 mb-6 dark:text-white"
              set:html={block.description}
            />
            <div class="text-center">
              <p class="font-semibold text-[#6c21c0] text-lg mb-2">
                {block.label}
              </p>
              <ul class="text-gray-800 text-base lg:text-xl space-y-2 font-semibold dark:text-white">
                {block.items.map((item) => (
                  <li>{item}</li>
                ))}
              </ul>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
<script>
  import gsap from "gsap";
  import ScrollTrigger from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  function animateSkills() {
    const section = document.querySelector("#skills");
    if (!section) return;

    const cards = section.querySelectorAll(".container > .grid > div");
    const isDesktop = window.matchMedia("(min-width: 1024px)").matches;

    const prefersReduced = window.matchMedia(
      "(prefers-reduced-motion: reduce)",
    ).matches;

    if (prefersReduced) return;

    if (isDesktop) {
      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: section,
          start: "top 80%",
        },
        defaults: { opacity: 0, duration: 0.8, ease: "power3.out" },
      });
      tl.from(cards[0], { y: 50 })
        .from(cards[1], { y: 50 }, "-=0.4")
        .from(cards[2], { y: 50 }, "-=0.4");
    } else {
      cards.forEach((card) => {
        gsap.from(card, {
          scrollTrigger: {
            trigger: card,
            start: "top 90%",
          },
          y: 50,
          opacity: 0,
          duration: 0.8,
          ease: "power3.out",
        });
      });
    }
  }
  animateSkills();
</script>
